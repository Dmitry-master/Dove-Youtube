function Youtube(a){this.channelId=a.channelId,this.playlistsConteiner=a.playlistsConteiner,this.videosConteiner=a.videosConteiner,this.videoConteiner=a.videoConteiner,this.activePlaylist=null,this.activeVideo=null,this.vent=$({}),this.init()}var templates={playlistItem:function(a){return'<li class="playlist_tabs_item" data-playlist-id="'+a.id+'"><figure><img src="'+a.snippet.thumbnails.medium.url+'" alt="'+a.snippet.title+'" class="playlist_image"><figcaption><span class="playlist_title">'+a.snippet.title+'</span><!--<br><span class="playlist_descr">Selfie</span>--></figcaption></figure></li>'},videoItem:function(a){return'<li class="playlist_videos_item" data-video-id="'+a.id+'"><figure><img src="'+a.snippet.thumbnails.medium.url+'" alt="'+a.snippet.title+'" class="video_sample"><figcaption class="video_title">'+a.snippet.title+"</figcaption></figure></li>"},video:function(a){return'<object width="100%" height="100%"><param name="movie" value="https://www.youtube.com/v/'+a.url+'&fs=1"></param><param name="allowFullScreen" value="true"></param><embed src="https://www.youtube.com/v/'+a.url+'&fs=1"type="application/x-shockwave-flash"width="100%" height="100%"allowfullscreen="true"></embed></object>'}};Youtube.prototype.init=function(){var a=this,b=a.getPlaylists();this.vent.on("activePlaylist:change",$.proxy(this.renderVideos,this)),this.vent.on("activeVideo:change",$.proxy(this.renderVideo,this)),this.playlistsConteiner.on("click","li",function(){}),this.videosConteiner.on("click","li",function(){}),b.then(function(b){if(console.log(b),b.items.length){a.renderPlaylists(b.items);var c=b.items[0].id;a.setActivePlaylist(c)}})},Youtube.prototype.getPlaylists=function(){var a=new $.Deferred;return $.ajax({url:"https://www.googleapis.com/youtube/v3/playlists",type:"GET",data:{part:"snippet",channelId:this.channelId,key:"AIzaSyD7ls_UCYsiKHwjPFFjvrATd0LLXxUubLI"},success:function(b){a.resolve(b)}}),a.promise()},Youtube.prototype.getVideos=function(a){var b=new $.Deferred;return $.ajax({url:"https://www.googleapis.com/youtube/v3/playlistItems",type:"GET",data:{part:"snippet",playlistId:a,key:"AIzaSyD7ls_UCYsiKHwjPFFjvrATd0LLXxUubLI"},success:function(a){b.resolve(a)}}),b.promise()},Youtube.prototype.setActivePlaylist=function(a){var b=this,c=b.getVideos(a);c.then(function(a){console.log(a),b.activePlaylist=a,b.vent.trigger("activePlaylist:change");var c=a.items[0];b.setActiveVideo(c)})},Youtube.prototype.setActiveVideo=function(a){console.log(a),this.activeVideo=a,this.vent.trigger("activeVideo:change")},Youtube.prototype.renderPlaylists=function(a){this.playlistsConteiner.empty();for(var b=0;4>b;b++)this.playlistsConteiner.append(templates.playlistItem(a[b]))},Youtube.prototype.renderVideos=function(){this.videosConteiner.empty();for(var a=0;3>a;a++)this.videosConteiner.append(templates.videoItem(this.activePlaylist.items[a]))},Youtube.prototype.renderVideo=function(){this.videoConteiner.empty().append(templates.video({url:this.activeVideo.snippet.resourceId.videoId}))},$(function(){function a(){f.height(f.width()*c)}{var b="UCxOWCBe-OpWGVbpea9Yqyzw",c=.59,d=$(".playlist_tabs"),e=$(".playlist_videos"),f=$("#video_wrap");new Youtube({channelId:b,playlistsConteiner:d,videosConteiner:e,videoConteiner:f})}$(window).resize(a),a()});